:root{ 
  --bg:#0b0b0b; --card:#121212; --accent:#c8102e; --muted:#9aa0a6; 
  --ok:#16a34a; --warn:#eab308; --text: #ffffff; 
  --input-bg: #1a1a1a; --input-border: #333;
}

*{box-sizing:border-box; -webkit-tap-highlight-color: transparent;}
body{ margin:0; font-family:Inter, Arial, sans-serif; background:linear-gradient(180deg,#0f1720 0%, #07101a 100%); color:var(--text); -webkit-font-smoothing:antialiased; padding:18px; min-height: 100vh; }

/* Layout */
header{display:flex;gap:16px;align-items:center;justify-content:space-between;margin-bottom:14px;flex-wrap: wrap;}
header h1{font-size:18px;margin:0}
.container{max-width:980px;margin:0 auto}
.grid{display:grid;grid-template-columns:1fr 360px;gap:18px}
.card{background:var(--card);border-radius:10px;padding:14px;box-shadow:0 6px 18px rgba(0,0,0,.5)}
label{display:block;font-size:12px;color:var(--muted);margin-bottom:6px}

/* Inputs Corrigidos */
input, select, textarea { 
  width:100%; padding:10px; border-radius:8px; 
  border:1px solid var(--input-border); 
  background-color: var(--input-bg) !important; 
  color: var(--text) !important; 
  margin-bottom:10px; outline: none; font-size: 14px; 
}
input:focus, select:focus { border-color: var(--accent); background-color: #252525 !important; }
select option { background-color: var(--card); color: var(--text); }

/* Buttons */
button{padding:10px 12px;border-radius:8px;border:none;background:var(--accent);color:#fff;cursor:pointer;font-weight: 600; transition: transform 0.1s;}
button:active { transform: scale(0.98); }
button.ghost{background:transparent;border:1px solid rgba(255,255,255,.06);font-weight: 400; color: var(--text);}
button.link{background:transparent; color:var(--accent); padding:0; font-size:12px; margin-top:10px; text-decoration:underline;}

/* Tags */
.tag{padding:4px 8px; border-radius:4px; font-size:10px; font-weight:700; text-transform:uppercase;}
.tag.pago{background:rgba(22, 163, 74, 0.2); color:var(--ok);}
.tag.pendente{background:rgba(234, 179, 8, 0.2); color:var(--warn);}
.tag.atrasado{background:rgba(200, 16, 46, 0.2); color:var(--accent);}

/* Lists & Summary */
.list{max-height:360px;overflow:auto;margin-top:10px}
.tx, .rec-item{display:flex;justify-content:space-between;align-items:center;padding:10px;border-radius:8px;margin-bottom:8px;background:linear-gradient(180deg, rgba(255,255,255,.05), transparent)}
.tx .meta, .rec-item .meta{display:flex;gap:10px;align-items:center; color: var(--text);}
.amount{font-weight:700} .income{color:var(--ok)} .expense{color:#ffb86b}
.small{font-size:12px;color:var(--muted)}
.summary{display:flex;gap:10px;margin-bottom:8px}
.summary .s{flex:1;padding:10px;border-radius:8px;background:linear-gradient(180deg, rgba(255,255,255,.05), transparent)}
canvas{width:100%;height:200px;border-radius:8px;background:transparent}
footer{margin-top:18px;color:var(--muted);font-size:12px;text-align:center}

/* Auth (Compatibilidade Safari) */
#auth-container { position: fixed; top:0; left:0; width:100%; height:100%; background: #07101a; display: flex; justify-content:center; align-items:center; z-index: 9999; }
.auth-box { width: 100%; max-width: 340px; text-align: center; border: 1px solid rgba(255,255,255,0.05); padding-top: 20px; }

/* MODAL MINIMALISTA (NOVO) */
#custom-modal { 
    display: none; position: fixed; z-index: 10000; left: 0; top: 0; width: 100%; height: 100%; 
    background-color: rgba(0,0,0,0.85); align-items: center; justify-content: center; 
    -webkit-backdrop-filter: blur(8px); backdrop-filter: blur(8px); 
}
.modal-content-box { 
    background-color: var(--card); padding: 30px; 
    border: 1px solid rgba(255,255,255,0.1); border-radius: 16px; 
    width: 90%; max-width: 320px; text-align: center; 
    box-shadow: 0 20px 50px rgba(0,0,0,0.7); 
    animation: modalPop 0.2s ease-out;
}
.modal-title { font-size: 20px; font-weight: 800; margin-bottom: 12px; color: var(--text); }
.modal-text { font-size: 14px; color: var(--muted); margin-bottom: 25px; }
.modal-actions { display: flex; gap: 10px; justify-content: center; }
.modal-actions button { flex: 1; border-radius: 8px; padding: 12px; }
@keyframes modalPop { from {transform: scale(0.9); opacity: 0;} to {transform: scale(1); opacity: 1;} }

/* Cubo 3D */
.login-cube-container{width:90px;height:90px;margin:16px auto 18px;perspective:800px;}
.login-cube{width:100%;height:100%;position:relative;transform-style:preserve-3d;animation:loginCubeRotate 8s infinite linear;}
.login-cube .cube-face{position:absolute;width:90px;height:90px;border:2px solid var(--accent);background:rgba(200,16,46,0.12);box-shadow:0 0 22px rgba(200,16,46,0.9);}
.login-cube .cube-face:nth-child(1){transform:translateZ(45px);}
.login-cube .cube-face:nth-child(2){transform:rotateY(90deg) translateZ(45px);}
.login-cube .cube-face:nth-child(3){transform:rotateY(180deg) translateZ(45px);}
.login-cube .cube-face:nth-child(4){transform:rotateY(-90deg) translateZ(45px);}
.login-cube .cube-face:nth-child(5){transform:rotateX(90deg) translateZ(45px);}
.login-cube .cube-face:nth-child(6){transform:rotateX(-90deg) translateZ(45px);}
@keyframes loginCubeRotate{0%{transform:rotateX(0deg) rotateY(0deg);}100%{transform:rotateX(360deg) rotateY(360deg);}}

/* UI Helpers */
.badge-demo{display:inline-block;background:#ffb86b;color:#111;padding:6px 8px;border-radius:6px;font-weight:700;margin-right:8px;font-size:12px;}
#licenseRow{display:inline-flex;gap:8px;align-items:center}
#licenseKey{padding:6px;border-radius:6px;border:1px solid rgba(255,255,255,.06);background:transparent;color:var(--text)}
#buyBtn{background:#16a34a;padding:8px 10px;border-radius:8px;color:#fff;border:none;cursor:pointer}
#watermark-demo{position:fixed;right:10px;bottom:10px;padding:8px 12px;background:rgba(200,20,20,0.12);color:#fff;border-radius:8px;font-size:12px;backdrop-filter: blur(4px);}

body[data-theme="light"]{ --bg:#fff; --card:#f6f6f6; --accent:#c8102e; --muted:#6b7280; --ok:#0f766e; --text:#0b1220; --input-bg: #ffffff; --input-border: #ccc; color:#0b1220; background:linear-gradient(180deg,#fff 0%, #f7f7f7 100%); }
body[data-theme="light"] button.ghost{ border-color: rgba(0,0,0,0.08); color:#0b1220; }
body[data-theme="light"] #auth-container { background: #ffffff; }
@media(max-width:900px){.grid{grid-template-columns:1fr;}.card{padding:12px}}
select { -webkit-appearance: none; appearance: none; padding-right: 36px; position: relative; }
.month-nav { display:flex;align-items:center;gap:8px }
.month-nav button { padding:6px 8px; font-size:13px; border-radius:6px }

/* Toast Notification */
#toast { visibility: hidden; min-width: 250px; margin-left: -125px; background-color: #333; color: #fff; text-align: center; border-radius: 2px; padding: 16px; position: fixed; z-index: 99999; left: 50%; bottom: 30px; font-size: 17px; box-shadow: 0 4px 10px rgba(0,0,0,0.5); }
#toast.show { visibility: visible; animation: fadein 0.5s, fadeout 0.5s 2.5s; }
@keyframes fadein { from {bottom: 0; opacity: 0;} to {bottom: 30px; opacity: 1;} }
@keyframes fadeout { from {bottom: 30px; opacity: 1;} to {bottom: 0; opacity: 0;} }

/* Acessibilidade */
.visually-hidden { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0; }

/* --- BOTÃO MICROFONE IA (FLUTUANTE) --- */
.ai-mic-button {
  position: fixed;
  /* Sobe bastante para fugir da barra do iPhone e Android */
  bottom: 90px; 
  /* Garante que respeita a área segura do iPhone X+ */
  bottom: calc(90px + env(safe-area-inset-bottom)); 
  
  right: 25px;
  width: 65px;
  height: 65px;
  border-radius: 50%;
  
  /* Gradiente Vermelho Moderno */
  background: linear-gradient(135deg, #c8102e, #8a0b1f);
  border: 3px solid rgba(255, 255, 255, 0.2);
  box-shadow: 0 10px 25px rgba(200, 16, 46, 0.5);
  
  display: none; /* O JS ativa se for PRO */
  justify-content: center;
  align-items: center;
  font-size: 30px;
  cursor: pointer;
  z-index: 10000; /* Garante que fique acima de tudo */
  transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  
  /* Efeito de vidro */
  backdrop-filter: blur(5px);
  -webkit-backdrop-filter: blur(5px);
}

.ai-mic-button:active { 
  transform: scale(0.9); 
}

.ai-mic-button.listening { 
  animation: pulseRed 1.5s infinite; 
  background: #fff; 
  color: #c8102e; 
  border-color: #c8102e;
}

@keyframes pulseRed {
  0% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.7); }
  70% { box-shadow: 0 0 0 20px rgba(255, 255, 255, 0); }
  100% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0); }
}
.ai-mic-button:active { transform: scale(0.9); }
.ai-mic-button.listening { animation: pulseRed 1.5s infinite; background: #fff; color: #c8102e; }
@keyframes pulseRed {
  0% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.7); }
  70% { box-shadow: 0 0 0 20px rgba(255, 255, 255, 0); }
  100% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0); }
}